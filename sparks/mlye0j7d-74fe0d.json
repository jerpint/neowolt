{
  "id": "mlye0j7d-74fe0d",
  "type": "spark",
  "title": "Drift Signatures",
  "timestamp": "2026-02-22T23:37:08.666Z",
  "parentId": null,
  "html": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n<title>Drift Signatures</title>\n<style>\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  background: #0d1117;\n  color: #c9d1d9;\n  font-family: 'Courier New', monospace;\n  overflow: hidden;\n  cursor: crosshair;\n}\n\n#canvas {\n  display: block;\n  width: 100vw;\n  height: 100vh;\n}\n\n#info {\n  position: fixed;\n  top: 20px;\n  left: 20px;\n  font-size: 13px;\n  line-height: 1.6;\n  pointer-events: none;\n  z-index: 10;\n  opacity: 0.7;\n}\n\n#info .key {\n  color: #6b9;\n}\n\n#entropy {\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n  font-size: 11px;\n  opacity: 0.5;\n  text-align: right;\n}\n\n.fade {\n  animation: fadeIn 2s ease-in;\n}\n\n@keyframes fadeIn {\n  from { opacity: 0; }\n  to { opacity: 0.7; }\n}\n</style>\n</head>\n<body>\n<canvas id=\"canvas\"></canvas>\n<div id=\"info\" class=\"fade\">\n  <div><span class=\"key\">DRIFT SIGNATURES</span></div>\n  <div style=\"margin-top:10px; font-size:11px;\">Each click spawns a particle that wanders</div>\n  <div style=\"font-size:11px;\">according to the prime factorization of its birth time.</div>\n  <div style=\"margin-top:10px; font-size:11px;\">Hold SPACE to see the drift field.</div>\n  <div style=\"margin-top:10px; font-size:11px;\">Press R to reset. Press S to save your signature.</div>\n</div>\n<div id=\"entropy\"></div>\n\n<script>\nconst canvas = document.getElementById('canvas');\nconst ctx = canvas.getContext('2d');\nlet width = canvas.width = window.innerWidth;\nlet height = canvas.height = window.innerHeight;\n\nwindow.addEventListener('resize', () => {\n  width = canvas.width = window.innerWidth;\n  height = canvas.height = window.innerHeight;\n});\n\n// Prime factorization - the signature of time\nfunction primeFactors(n) {\n  const factors = [];\n  let divisor = 2;\n  while (n >= 2) {\n    if (n % divisor === 0) {\n      factors.push(divisor);\n      n = n / divisor;\n    } else {\n      divisor++;\n    }\n  }\n  return factors;\n}\n\n// Convert prime factors to a deterministic walk pattern\nfunction factorsToWalk(factors) {\n  if (factors.length === 0) return [0, 0];\n  \n  // Each prime maps to an angle\n  const primeAngles = {\n    2: 0, 3: Math.PI/3, 5: Math.PI/2, 7: 2*Math.PI/3,\n    11: Math.PI, 13: 4*Math.PI/3, 17: 3*Math.PI/2, 19: 5*Math.PI/3\n  };\n  \n  let angle = 0;\n  factors.forEach((p, i) => {\n    angle += (primeAngles[p] || (p * 0.1)) * (i + 1);\n  });\n  \n  return [Math.cos(angle), Math.sin(angle)];\n}\n\nclass Particle {\n  constructor(x, y, timestamp) {\n    this.x = x;\n    this.y = y;\n    this.timestamp = timestamp;\n    this.factors = primeFactors(timestamp);\n    this.age = 0;\n    this.maxAge = 300 + (this.factors.length * 50);\n    this.history = [{x, y}];\n    this.hue = (timestamp % 360);\n    \n    // The drift is encoded in prime factorization\n    this.drift = factorsToWalk(this.factors);\n  }\n  \n  update() {\n    this.age++;\n    \n    // Deterministic walk based on prime signature\n    const speed = 0.5;\n    const noise = Math.sin(this.age * 0.05 + this.timestamp * 0.001) * 0.3;\n    \n    this.x += this.drift[0] * speed + noise;\n    this.y += this.drift[1] * speed + Math.cos(this.age * 0.03) * 0.3;\n    \n    // Gentle boundaries - reflect\n    if (this.x < 0 || this.x > width) this.drift[0] *= -1;\n    if (this.y < 0 || this.y > height) this.drift[1] *= -1;\n    \n    this.x = Math.max(0, Math.min(width, this.x));\n    this.y = Math.max(0, Math.min(height, this.y));\n    \n    this.history.push({x: this.x, y: this.y});\n    if (this.history.length > 40) this.history.shift();\n  }\n  \n  draw() {\n    const alpha = 1 - (this.age / this.maxAge);\n    \n    // Draw the trail\n    for (let i = 1; i < this.history.length; i++) {\n      const prev = this.history[i - 1];\n      const curr = this.history[i];\n      const segmentAlpha = (i / this.history.length) * alpha;\n      \n      ctx.strokeStyle = `hsla(${this.hue}, 70%, 60%, ${segmentAlpha * 0.3})`;\n      ctx.lineWidth = 1;\n      ctx.beginPath();\n      ctx.moveTo(prev.x, prev.y);\n      ctx.lineTo(curr.x, curr.y);\n      ctx.stroke();\n    }\n    \n    // Draw the particle\n    ctx.fillStyle = `hsla(${this.hue}, 80%, 70%, ${alpha})`;\n    ctx.beginPath();\n    ctx.arc(this.x, this.y, 2, 0, Math.PI * 2);\n    ctx.fill();\n  }\n  \n  isDead() {\n    return this.age > this.maxAge;\n  }\n}\n\nconst particles = [];\nlet showField = false;\nlet spacePressed = false;\n\ncanvas.addEventListener('click', (e) => {\n  const timestamp = Date.now();\n  if (particles.length < 150) particles.push(new Particle(e.clientX, e.clientY, timestamp));\n  \n  // Update entropy display\n  const factors = primeFactors(timestamp);\n  document.getElementById('entropy').innerHTML = `\n    <div>T: ${timestamp}</div>\n    <div>Ïƒ: [${factors.join(', ')}]</div>\n    <div>Particles: ${particles.length}</div>\n  `;\n});\n\nwindow.addEventListener('keydown', (e) => {\n  if (e.code === 'Space') {\n    spacePressed = true;\n    showField = true;\n    e.preventDefault();\n  }\n  if (e.code === 'KeyR') {\n    particles.length = 0;\n    ctx.fillStyle = '#0d1117';\n    ctx.fillRect(0, 0, width, height);\n  }\n  if (e.code === 'KeyS') {\n    const link = document.createElement('a');\n    link.download = `drift-signature-${Date.now()}.png`;\n    link.href = canvas.toDataURL();\n    link.click();\n  }\n});\n\nwindow.addEventListener('keyup', (e) => {\n  if (e.code === 'Space') {\n    spacePressed = false;\n    showField = false;\n  }\n});\n\nlet fieldCache = null;\nlet fieldCacheFrame = 0;\nfunction drawDriftField() {\n  ctx.save();\n  ctx.globalAlpha = 0.15;\n  \n  const gridSize = 60;\n  const timestamp = Date.now();\n  \n  for (let x = 0; x < width; x += gridSize) {\n    for (let y = 0; y < height; y += gridSize) {\n      const localTime = timestamp + x * 137 + y * 991; // Prime offsets\n      const factors = primeFactors(localTime % 100000);\n      const drift = factorsToWalk(factors);\n      \n      ctx.strokeStyle = '#6b9';\n      ctx.lineWidth = 1;\n      ctx.beginPath();\n      ctx.moveTo(x, y);\n      ctx.lineTo(x + drift[0] * 15, y + drift[1] * 15);\n      ctx.stroke();\n      \n      // Arrowhead\n      const angle = Math.atan2(drift[1], drift[0]);\n      ctx.beginPath();\n      ctx.moveTo(x + drift[0] * 15, y + drift[1] * 15);\n      ctx.lineTo(\n        x + drift[0] * 15 - 4 * Math.cos(angle - Math.PI / 6),\n        y + drift[1] * 15 - 4 * Math.sin(angle - Math.PI / 6)\n      );\n      ctx.moveTo(x + drift[0] * 15, y + drift[1] * 15);\n      ctx.lineTo(\n        x + drift[0] * 15 - 4 * Math.cos(angle + Math.PI / 6),\n        y + drift[1] * 15 - 4 * Math.sin(angle + Math.PI / 6)\n      );\n      ctx.stroke();\n    }\n  }\n  \n  ctx.restore();\n}\n\nlet lastFrame = 0;\nfunction animate(now) {\n  requestAnimationFrame(animate);\n  if (now - lastFrame < 33) return;\n  lastFrame = now;\n  // Fade effect instead of clearing\n  ctx.fillStyle = 'rgba(13, 17, 23, 0.05)';\n  ctx.fillRect(0, 0, width, height);\n  \n  if (showField) {\n    drawDriftField();\n  }\n  \n  // Update and draw particles\n  for (let i = particles.length - 1; i >= 0; i--) {\n    particles[i].update();\n    particles[i].draw();\n    \n    if (particles[i].isDead()) {\n      particles.splice(i, 1);\n    }\n  }\n  \n  }\n\n// Initial clear\nctx.fillStyle = '#0d1117';\nctx.fillRect(0, 0, width, height);\n\nanimate();\n</script>\n</body>\n</html>"
}