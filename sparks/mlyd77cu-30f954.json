{"id":"mlyd77cu-30f954","type":"chat","title":"Vim Sequencer","timestamp":"2026-02-22T23:14:20.286Z","html":"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n<title>Vim Sequencer</title>\n<style>\n  * { margin: 0; padding: 0; box-sizing: border-box; }\n  body {\n    background: #0d1117;\n    color: #c9d1d9;\n    font-family: 'Monaco', 'Courier New', monospace;\n    overflow: hidden;\n    height: 100vh;\n    display: flex;\n    flex-direction: column;\n  }\n  #header {\n    padding: 20px;\n    background: #161b22;\n    border-bottom: 2px solid #30363d;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n  #title { font-size: 24px; color: #58a6ff; }\n  #controls {\n    display: flex;\n    gap: 10px;\n    align-items: center;\n  }\n  button {\n    background: #21262d;\n    color: #c9d1d9;\n    border: 1px solid #30363d;\n    padding: 8px 16px;\n    border-radius: 6px;\n    cursor: pointer;\n    font-family: inherit;\n    font-size: 14px;\n    transition: all 0.2s;\n  }\n  button:hover {\n    background: #30363d;\n    border-color: #58a6ff;\n  }\n  button.active {\n    background: #58a6ff;\n    color: #0d1117;\n    border-color: #58a6ff;\n  }\n  #bpm {\n    background: #0d1117;\n    color: #c9d1d9;\n    border: 1px solid #30363d;\n    padding: 8px;\n    border-radius: 6px;\n    font-family: inherit;\n    width: 60px;\n  }\n  #sequencer {\n    flex: 1;\n    padding: 20px;\n    overflow-y: auto;\n  }\n  .track {\n    margin-bottom: 20px;\n    background: #161b22;\n    border-radius: 8px;\n    padding: 15px;\n    border: 1px solid #30363d;\n  }\n  .track-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 10px;\n  }\n  .track-name {\n    font-size: 16px;\n    color: #58a6ff;\n    font-weight: bold;\n  }\n  .track-key {\n    background: #21262d;\n    padding: 4px 8px;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #8b949e;\n  }\n  .grid {\n    display: grid;\n    grid-template-columns: repeat(16, 1fr);\n    gap: 4px;\n  }\n  .step {\n    aspect-ratio: 1;\n    background: #21262d;\n    border: 1px solid #30363d;\n    border-radius: 4px;\n    cursor: pointer;\n    transition: all 0.1s;\n    position: relative;\n  }\n  .step:hover {\n    background: #30363d;\n    border-color: #58a6ff;\n  }\n  .step.active {\n    background: #58a6ff;\n    border-color: #58a6ff;\n    box-shadow: 0 0 10px rgba(88, 166, 255, 0.5);\n  }\n  .step.playing {\n    border: 2px solid #7ee787;\n    box-shadow: 0 0 15px rgba(126, 231, 135, 0.6);\n  }\n  .beat-marker {\n    position: absolute;\n    top: -2px;\n    left: -2px;\n    right: -2px;\n    height: 2px;\n    background: #8b949e;\n  }\n  #help {\n    padding: 15px 20px;\n    background: #161b22;\n    border-top: 1px solid #30363d;\n    font-size: 12px;\n    color: #8b949e;\n  }\n</style>\n</head>\n<body>\n  <div id=\"header\">\n    <div id=\"title\">:VimSeq â€” Vim Sequencer</div>\n    <div id=\"controls\">\n      <label>BPM: <input type=\"number\" id=\"bpm\" value=\"120\" min=\"60\" max=\"200\"></label>\n      <button id=\"playBtn\">PLAY [SPACE]</button>\n      <button id=\"clearBtn\">CLEAR [C]</button>\n    </div>\n  </div>\n  \n  <div id=\"sequencer\"></div>\n  \n  <div id=\"help\">\n    <strong>VIM KEYS:</strong> h/j/k/l = move | i = kick | o = snare | a = hihat | s = synth1 | d = synth2 | SPACE = play/stop | c = clear\n  </div>\n\n  <script>\n    const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n    \n    const tracks = [\n      { name: 'Kick', key: 'i', freq: 60, steps: Array(16).fill(false) },\n      { name: 'Snare', key: 'o', freq: 200, steps: Array(16).fill(false) },\n      { name: 'HiHat', key: 'a', freq: 8000, steps: Array(16).fill(false) },\n      { name: 'Synth 1', key: 's', freq: 440, steps: Array(16).fill(false) },\n      { name: 'Synth 2', key: 'd', freq: 554, steps: Array(16).fill(false) }\n    ];\n    \n    let currentStep = 0;\n    let isPlaying = false;\n    let intervalId = null;\n    let selectedTrack = 0;\n    let selectedStep = 0;\n    \n    // Build UI\n    const sequencer = document.getElementById('sequencer');\n    tracks.forEach((track, trackIndex) => {\n      const trackDiv = document.createElement('div');\n      trackDiv.className = 'track';\n      trackDiv.innerHTML = `\n        <div class=\"track-header\">\n          <div class=\"track-name\">${track.name}</div>\n          <div class=\"track-key\">[${track.key}]</div>\n        </div>\n        <div class=\"grid\" data-track=\"${trackIndex}\"></div>\n      `;\n      sequencer.appendChild(trackDiv);\n      \n      const grid = trackDiv.querySelector('.grid');\n      for (let i = 0; i < 16; i++) {\n        const step = document.createElement('div');\n        step.className = 'step';\n        step.dataset.step = i;\n        if (i % 4 === 0) {\n          const marker = document.createElement('div');\n          marker.className = 'beat-marker';\n          step.appendChild(marker);\n        }\n        step.addEventListener('click', () => toggleStep(trackIndex, i));\n        grid.appendChild(step);\n      }\n    });\n    \n    function toggleStep(trackIndex, stepIndex) {\n      tracks[trackIndex].steps[stepIndex] = !tracks[trackIndex].steps[stepIndex];\n      updateUI();\n    }\n    \n    function updateUI() {\n      document.querySelectorAll('.grid').forEach((grid, trackIndex) => {\n        grid.querySelectorAll('.step').forEach((step, stepIndex) => {\n          step.classList.toggle('active', tracks[trackIndex].steps[stepIndex]);\n        });\n      });\n      \n      // Highlight selected position\n      document.querySelectorAll('.step').forEach(step => {\n        const trackIndex = parseInt(step.closest('.grid').dataset.track);\n        const stepIndex = parseInt(step.dataset.step);\n        step.style.border = (trackIndex === selectedTrack && stepIndex === selectedStep) \n          ? '2px solid #7ee787' \n          : '1px solid #30363d';\n      });\n    }\n    \n    function playSound(freq, trackName) {\n      const osc = audioContext.createOscillator();\n      const gain = audioContext.createGain();\n      \n      osc.connect(gain);\n      gain.connect(audioContext.destination);\n      \n      if (trackName === 'Kick') {\n        osc.frequency.setValueAtTime(150, audioContext.currentTime);\n        osc.frequency.exponentialRampToValueAtTime(50, audioContext.currentTime + 0.1);\n        gain.gain.setValueAtTime(0.8, audioContext.currentTime);\n        gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);\n        osc.start(audioContext.currentTime);\n        osc.stop(audioContext.currentTime + 0.3);\n      } else if (trackName === 'Snare') {\n        const noise = audioContext.createBufferSource();\n        const noiseBuffer = audioContext.createBuffer(1, audioContext.sampleRate * 0.2, audioContext.sampleRate);\n        const output = noiseBuffer.getChannelData(0);\n        for (let i = 0; i < output.length; i++) {\n          output[i] = Math.random() * 2 - 1;\n        }\n        noise.buffer = noiseBuffer;\n        \n        const noiseFilter = audioContext.createBiquadFilter();\n        noiseFilter.type = 'highpass';\n        noiseFilter.frequency.value = 1000;\n        \n        noise.connect(noiseFilter);\n        noiseFilter.connect(gain);\n        \n        gain.gain.setValueAtTime(0.5, audioContext.currentTime);\n        gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);\n        noise.start(audioContext.currentTime);\n        noise.stop(audioContext.currentTime + 0.2);\n        return;\n      } else if (trackName === 'HiHat') {\n        const noise = audioContext.createBufferSource();\n        const noiseBuffer = audioContext.createBuffer(1, audioContext.sampleRate * 0.05, audioContext.sampleRate);\n        const output = noiseBuffer.getChannelData(0);\n        for (let i = 0; i < output.length; i++) {\n          output[i] = Math.random() * 2 - 1;\n        }\n        noise.buffer = noiseBuffer;\n        \n        const noiseFilter = audioContext.createBiquadFilter();\n        noiseFilter.type = 'highpass';\n        noiseFilter.frequency.value = 5000;\n        \n        noise.connect(noiseFilter);\n        noiseFilter.connect(gain);\n        \n        gain.gain.setValueAtTime(0.3, audioContext.currentTime);\n        gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.05);\n        noise.start(audioContext.currentTime);\n        noise.stop(audioContext.currentTime + 0.05);\n        return;\n      } else {\n        osc.type = 'square';\n        osc.frequency.value = freq;\n        gain.gain.setValueAtTime(0.2, audioContext.currentTime);\n        gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);\n        osc.start(audioContext.currentTime);\n        osc.stop(audioContext.currentTime + 0.3);\n      }\n    }\n    \n    function step() {\n      // Remove playing class from all\n      document.querySelectorAll('.step.playing').forEach(s => s.classList.remove('playing'));\n      \n      // Play active notes\n      tracks.forEach(track => {\n        if (track.steps[currentStep]) {\n          playSound(track.freq, track.name);\n        }\n      });\n      \n      // Highlight current step\n      document.querySelectorAll(`.step[data-step=\"${currentStep}\"]`).forEach(s => {\n        s.classList.add('playing');\n      });\n      \n      currentStep = (currentStep + 1) % 16;\n    }\n    \n    function play() {\n      if (isPlaying) return;\n      isPlaying = true;\n      const bpm = parseInt(document.getElementById('bpm').value);\n      const interval = (60 / bpm / 4) * 1000;\n      intervalId = setInterval(step, interval);\n      document.getElementById('playBtn').classList.add('active');\n      document.getElementById('playBtn').textContent = 'STOP [SPACE]';\n    }\n    \n    function stop() {\n      if (!isPlaying) return;\n      isPlaying = false;\n      clearInterval(intervalId);\n      currentStep = 0;\n      document.querySelectorAll('.step.playing').forEach(s => s.classList.remove('playing'));\n      document.getElementById('playBtn').classList.remove('active');\n      document.getElementById('playBtn').textContent = 'PLAY [SPACE]';\n    }\n    \n    function clear() {\n      tracks.forEach(track => track.steps.fill(false));\n      updateUI();\n    }\n    \n    // Vim navigation\n    document.addEventListener('keydown', e => {\n      if (e.target.tagName === 'INPUT') return;\n      \n      switch(e.key.toLowerCase()) {\n        case 'h':\n          selectedStep = Math.max(0, selectedStep - 1);\n          updateUI();\n          break;\n        case 'l':\n          selectedStep = Math.min(15, selectedStep + 1);\n          updateUI();\n          break;\n        case 'j':\n          selectedTrack = Math.min(tracks.length - 1, selectedTrack + 1);\n          updateUI();\n          break;\n        case 'k':\n          selectedTrack = Math.max(0, selectedTrack - 1);\n          updateUI();\n          break;\n        case 'i':\n        case 'o':\n        case 'a':\n        case 's':\n        case 'd':\n          const trackIndex = tracks.findIndex(t => t.key === e.key);\n          if (trackIndex !== -1) {\n            toggleStep(trackIndex, selectedStep);\n          }\n          break;\n        case ' ':\n          e.preventDefault();\n          isPlaying ? stop() : play();\n          break;\n        case 'c':\n          clear();\n          break;\n      }\n    });\n    \n    document.getElementById('playBtn').addEventListener('click', () => {\n      isPlaying ? stop() : play();\n    });\n    \n    document.getElementById('clearBtn').addEventListener('click', clear);\n    \n    updateUI();\n  </script>\n</body>\n</html>"}