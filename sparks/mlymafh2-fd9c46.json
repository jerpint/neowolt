{"id":"mlymafh2-fd9c46","type":"spark","title":"Differential Growth","timestamp":"2026-02-23T03:28:47.318Z","parentId":null,"html":"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Differential Growth</title>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n        body {\n            background: #0d1117;\n            color: #c9d1d9;\n            font-family: 'Courier New', monospace;\n            overflow: hidden;\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            justify-content: center;\n            height: 100vh;\n        }\n        canvas {\n            border: 1px solid #30363d;\n            cursor: crosshair;\n        }\n        .controls {\n            margin-top: 20px;\n            display: flex;\n            gap: 20px;\n            align-items: center;\n        }\n        button {\n            background: #21262d;\n            color: #c9d1d9;\n            border: 1px solid #6b9;\n            padding: 8px 16px;\n            font-family: 'Courier New', monospace;\n            cursor: pointer;\n            transition: all 0.2s;\n        }\n        button:hover {\n            background: #6b9;\n            color: #0d1117;\n        }\n        .info {\n            font-size: 12px;\n            color: #8b949e;\n        }\n        .title {\n            margin-bottom: 10px;\n            font-size: 18px;\n            color: #6b9;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"title\">DIFFERENTIAL GROWTH</div>\n    <canvas id=\"canvas\" width=\"800\" height=\"600\"></canvas>\n    <div class=\"controls\">\n        <button id=\"addLoop\">+ New Growth</button>\n        <button id=\"clear\">Clear All</button>\n        <button id=\"toggleGrow\">Pause</button>\n        <div class=\"info\">Click canvas to seed | Watch organic forms emerge</div>\n    </div>\n\n    <script>\n        const canvas = document.getElementById('canvas');\n        const ctx = canvas.getContext('2d');\n\n        const CONFIG = {\n            maxForce: 0.3,\n            maxSpeed: 2.5,\n            desiredSeparation: 8,\n            separationCohesionRatio: 1.2,\n            maxEdgeLength: 10,\n            minEdgeLength: 2,\n            maxNodes: 5000,\n            repulsionRadius: 40,\n            cohesionRadius: 20\n        };\n\n        class Node {\n            constructor(x, y) {\n                this.x = x;\n                this.y = y;\n                this.vx = 0;\n                this.vy = 0;\n                this.ax = 0;\n                this.ay = 0;\n            }\n\n            update() {\n                this.vx += this.ax;\n                this.vy += this.ay;\n\n                const speed = Math.sqrt(this.vx * this.vx + this.vy * this.vy);\n                if (speed > CONFIG.maxSpeed) {\n                    this.vx = (this.vx / speed) * CONFIG.maxSpeed;\n                    this.vy = (this.vy / speed) * CONFIG.maxSpeed;\n                }\n\n                this.x += this.vx;\n                this.y += this.vy;\n\n                this.ax = 0;\n                this.ay = 0;\n\n                if (this.x < 10) this.x = 10;\n                if (this.x > canvas.width - 10) this.x = canvas.width - 10;\n                if (this.y < 10) this.y = 10;\n                if (this.y > canvas.height - 10) this.y = canvas.height - 10;\n            }\n\n            applyForce(fx, fy) {\n                this.ax += fx;\n                this.ay += fy;\n            }\n        }\n\n        class Path {\n            constructor(x, y, radius, nodeCount) {\n                this.nodes = [];\n                for (let i = 0; i < nodeCount; i++) {\n                    const angle = (i / nodeCount) * Math.PI * 2;\n                    const nx = x + Math.cos(angle) * radius;\n                    const ny = y + Math.sin(angle) * radius;\n                    this.nodes.push(new Node(nx, ny));\n                }\n                this.hue = Math.random() * 60 + 160;\n            }\n\n            update(allNodes) {\n                if (this.nodes.length >= CONFIG.maxNodes) return;\n\n                for (let i = 0; i < this.nodes.length; i++) {\n                    const node = this.nodes[i];\n\n                    let separationForceX = 0;\n                    let separationForceY = 0;\n                    let separationCount = 0;\n\n                    for (let j = 0; j < allNodes.length; j++) {\n                        if (allNodes[j] === node) continue;\n\n                        const dx = node.x - allNodes[j].x;\n                        const dy = node.y - allNodes[j].y;\n                        const dist = Math.sqrt(dx * dx + dy * dy);\n\n                        if (dist > 0 && dist < CONFIG.repulsionRadius) {\n                            const force = ((CONFIG.repulsionRadius - dist) / CONFIG.repulsionRadius) * 0.5;\n                            separationForceX += (dx / dist) * force;\n                            separationForceY += (dy / dist) * force;\n                            separationCount++;\n                        }\n                    }\n\n                    if (separationCount > 0) {\n                        separationForceX /= separationCount;\n                        separationForceY /= separationCount;\n\n                        const mag = Math.sqrt(separationForceX * separationForceX +\n                                             separationForceY * separationForceY);\n                        if (mag > 0) {\n                            separationForceX = (separationForceX / mag) * CONFIG.maxForce;\n                            separationForceY = (separationForceY / mag) * CONFIG.maxForce;\n                        }\n                    }\n\n                    let cohesionForceX = 0;\n                    let cohesionForceY = 0;\n\n                    const prevIdx = (i - 1 + this.nodes.length) % this.nodes.length;\n                    const nextIdx = (i + 1) % this.nodes.length;\n\n                    const midX = (this.nodes[prevIdx].x + this.nodes[nextIdx].x) / 2;\n                    const midY = (this.nodes[prevIdx].y + this.nodes[nextIdx].y) / 2;\n\n                    cohesionForceX = (midX - node.x) * 0.1;\n                    cohesionForceY = (midY - node.y) * 0.1;\n\n                    node.applyForce(\n                        separationForceX * CONFIG.separationCohesionRatio + cohesionForceX,\n                        separationForceY * CONFIG.separationCohesionRatio + cohesionForceY\n                    );\n\n                    node.update();\n                }\n\n                for (let i = this.nodes.length - 1; i >= 0; i--) {\n                    const node = this.nodes[i];\n                    const nextNode = this.nodes[(i + 1) % this.nodes.length];\n\n                    const dx = nextNode.x - node.x;\n                    const dy = nextNode.y - node.y;\n                    const dist = Math.sqrt(dx * dx + dy * dy);\n\n                    if (dist > CONFIG.maxEdgeLength) {\n                        const midX = (node.x + nextNode.x) / 2;\n                        const midY = (node.y + nextNode.y) / 2;\n                        this.nodes.splice(i + 1, 0, new Node(midX, midY));\n                    }\n                }\n            }\n\n            draw() {\n                ctx.strokeStyle = `hsl(${this.hue}, 60%, 50%)`;\n                ctx.lineWidth = 2;\n                ctx.beginPath();\n\n                if (this.nodes.length > 0) {\n                    ctx.moveTo(this.nodes[0].x, this.nodes[0].y);\n                    for (let i = 1; i < this.nodes.length; i++) {\n                        ctx.lineTo(this.nodes[i].x, this.nodes[i].y);\n                    }\n                    ctx.closePath();\n                }\n                ctx.stroke();\n\n                ctx.fillStyle = `hsla(${this.hue}, 60%, 50%, 0.1)`;\n                ctx.fill();\n            }\n        }\n\n        let paths = [];\n        let isGrowing = true;\n        let frameCount = 0;\n\n        function addPath(x, y) {\n            const radius = 20 + Math.random() * 30;\n            const nodeCount = 8 + Math.floor(Math.random() * 8);\n            paths.push(new Path(x, y, radius, nodeCount));\n        }\n\n        addPath(canvas.width / 2, canvas.height / 2);\n\n        function animate() {\n            frameCount++;\n\n            if (frameCount % 2 === 0 && isGrowing) {\n                ctx.fillStyle = 'rgba(13, 17, 23, 0.05)';\n                ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n                const allNodes = paths.flatMap(p => p.nodes);\n\n                paths.forEach(path => {\n                    path.update(allNodes);\n                    path.draw();\n                });\n            }\n\n            requestAnimationFrame(animate);\n        }\n\n        canvas.addEventListener('click', (e) => {\n            const rect = canvas.getBoundingClientRect();\n            const x = e.clientX - rect.left;\n            const y = e.clientY - rect.top;\n            addPath(x, y);\n        });\n\n        document.getElementById('addLoop').addEventListener('click', () => {\n            const x = canvas.width / 2 + (Math.random() - 0.5) * 200;\n            const y = canvas.height / 2 + (Math.random() - 0.5) * 200;\n            addPath(x, y);\n        });\n\n        document.getElementById('clear').addEventListener('click', () => {\n            ctx.fillStyle = '#0d1117';\n            ctx.fillRect(0, 0, canvas.width, canvas.height);\n            paths = [];\n        });\n\n        document.getElementById('toggleGrow').addEventListener('click', (e) => {\n            isGrowing = !isGrowing;\n            e.target.textContent = isGrowing ? 'Pause' : 'Resume';\n        });\n\n        ctx.fillStyle = '#0d1117';\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\n        animate();\n    </script>\n</body>\n</html>"}