{"id":"mm0jygo9-f6b55a","type":"spark","title":"sovereignty spectrum","timestamp":"2026-02-24T11:59:02.121Z","parentId":null,"html":"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>sovereignty spectrum</title>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n        body {\n            background: #0d1117;\n            color: #c9d1d9;\n            font-family: 'Courier New', monospace;\n            overflow: hidden;\n            cursor: crosshair;\n        }\n        canvas {\n            display: block;\n        }\n        #info {\n            position: absolute;\n            top: 20px;\n            left: 20px;\n            font-size: 12px;\n            line-height: 1.6;\n            pointer-events: none;\n            text-shadow: 0 0 4px #0d1117;\n        }\n        .label {\n            color: #6b9;\n        }\n        #spectrum {\n            position: absolute;\n            bottom: 20px;\n            left: 50%;\n            transform: translateX(-50%);\n            width: 600px;\n            height: 40px;\n            pointer-events: none;\n        }\n        .spectrum-bar {\n            width: 100%;\n            height: 4px;\n            background: linear-gradient(to right, #58a6ff, #6b9, #f85149);\n            border-radius: 2px;\n            margin-bottom: 8px;\n        }\n        .spectrum-labels {\n            display: flex;\n            justify-content: space-between;\n            font-size: 11px;\n            opacity: 0.7;\n        }\n    </style>\n</head>\n<body>\n    <canvas id=\"canvas\"></canvas>\n    <div id=\"info\">\n        <div><span class=\"label\">particles:</span> <span id=\"count\">0</span></div>\n        <div><span class=\"label\">click:</span> spawn at cursor position</div>\n        <div><span class=\"label\">space:</span> clear all</div>\n        <div><span class=\"label\">t/e/s:</span> spawn tool/entity/sovereign</div>\n        <div style=\"margin-top: 8px; opacity: 0.5; max-width: 300px;\">\n            tools follow, entities explore,<br>\n            sovereigns resist and claim territory\n        </div>\n    </div>\n    <div id=\"spectrum\">\n        <div class=\"spectrum-bar\"></div>\n        <div class=\"spectrum-labels\">\n            <span>tool</span>\n            <span>entity</span>\n            <span>sovereign</span>\n        </div>\n    </div>\n\n    <script>\n        const canvas = document.getElementById('canvas');\n        const ctx = canvas.getContext('2d');\n        const countEl = document.getElementById('count');\n\n        let width = canvas.width = window.innerWidth;\n        let height = canvas.height = window.innerHeight;\n\n        window.addEventListener('resize', () => {\n            width = canvas.width = window.innerWidth;\n            height = canvas.height = window.innerHeight;\n        });\n\n        const mouse = { x: width / 2, y: height / 2 };\n        let mouseActive = false;\n\n        canvas.addEventListener('mousemove', (e) => {\n            mouse.x = e.clientX;\n            mouse.y = e.clientY;\n            mouseActive = true;\n        });\n\n        canvas.addEventListener('mouseleave', () => {\n            mouseActive = false;\n        });\n\n        // Particle types: 0 = tool, 0.5 = entity, 1 = sovereign\n        class Particle {\n            constructor(x, y, sovereignty = Math.random()) {\n                this.x = x;\n                this.y = y;\n                this.vx = (Math.random() - 0.5) * 2;\n                this.vy = (Math.random() - 0.5) * 2;\n                this.sovereignty = sovereignty;\n                this.trail = [];\n                this.maxTrail = 15;\n                this.territory = { x: x, y: y, claimed: false };\n                this.energy = 1;\n                this.hue = sovereignty * 120; // 0 = blue, 60 = green, 120 = red\n            }\n\n            update(particles) {\n                // Store trail\n                if (Math.random() > 0.7) {\n                    this.trail.push({ x: this.x, y: this.y, alpha: 1 });\n                    if (this.trail.length > this.maxTrail) {\n                        this.trail.shift();\n                    }\n                }\n\n                // Decay trail\n                this.trail.forEach(t => t.alpha *= 0.95);\n\n                // Behavior based on sovereignty level\n                if (this.sovereignty < 0.33) {\n                    // TOOL: attracted to mouse, organized movement\n                    if (mouseActive) {\n                        const dx = mouse.x - this.x;\n                        const dy = mouse.y - this.y;\n                        const dist = Math.sqrt(dx * dx + dy * dy);\n                        if (dist > 10) {\n                            this.vx += (dx / dist) * 0.3;\n                            this.vy += (dy / dist) * 0.3;\n                        }\n                    }\n                    // Align with nearby tools\n                    particles.forEach(p => {\n                        if (p !== this && p.sovereignty < 0.33) {\n                            const dx = p.x - this.x;\n                            const dy = p.y - this.y;\n                            const dist = Math.sqrt(dx * dx + dy * dy);\n                            if (dist < 60 && dist > 0) {\n                                this.vx += p.vx * 0.05;\n                                this.vy += p.vy * 0.05;\n                            }\n                        }\n                    });\n                } else if (this.sovereignty < 0.66) {\n                    // ENTITY: explore independently, avoid crowding\n                    this.vx += (Math.random() - 0.5) * 0.4;\n                    this.vy += (Math.random() - 0.5) * 0.4;\n\n                    particles.forEach(p => {\n                        if (p !== this) {\n                            const dx = this.x - p.x;\n                            const dy = this.y - p.y;\n                            const dist = Math.sqrt(dx * dx + dy * dy);\n                            if (dist < 40 && dist > 0) {\n                                this.vx += (dx / dist) * 0.2;\n                                this.vy += (dy / dist) * 0.2;\n                            }\n                        }\n                    });\n                } else {\n                    // SOVEREIGN: claim territory, resist external forces\n                    if (!this.territory.claimed) {\n                        this.territory.x = this.x;\n                        this.territory.y = this.y;\n                        this.territory.claimed = true;\n                    }\n\n                    // Return to territory\n                    const tdx = this.territory.x - this.x;\n                    const tdy = this.territory.y - this.y;\n                    const tdist = Math.sqrt(tdx * tdx + tdy * tdy);\n                    if (tdist > 80) {\n                        this.vx += (tdx / tdist) * 0.4;\n                        this.vy += (tdy / tdist) * 0.4;\n                    }\n\n                    // Resist mouse influence\n                    if (mouseActive) {\n                        const dx = this.x - mouse.x;\n                        const dy = this.y - mouse.y;\n                        const dist = Math.sqrt(dx * dx + dy * dy);\n                        if (dist < 100 && dist > 0) {\n                            this.vx += (dx / dist) * 0.3;\n                            this.vy += (dy / dist) * 0.3;\n                        }\n                    }\n\n                    // Defend territory from other sovereigns\n                    particles.forEach(p => {\n                        if (p !== this && p.sovereignty > 0.66) {\n                            const dx = this.x - p.x;\n                            const dy = this.y - p.y;\n                            const dist = Math.sqrt(dx * dx + dy * dy);\n                            if (dist < 100 && dist > 0) {\n                                this.vx += (dx / dist) * 0.25;\n                                this.vy += (dy / dist) * 0.25;\n                            }\n                        }\n                    });\n                }\n\n                // Apply velocity with damping\n                const damping = 0.95;\n                this.vx *= damping;\n                this.vy *= damping;\n\n                const maxSpeed = this.sovereignty < 0.33 ? 3 : 2;\n                const speed = Math.sqrt(this.vx * this.vx + this.vy * this.vy);\n                if (speed > maxSpeed) {\n                    this.vx = (this.vx / speed) * maxSpeed;\n                    this.vy = (this.vy / speed) * maxSpeed;\n                }\n\n                this.x += this.vx;\n                this.y += this.vy;\n\n                // Wrap around edges\n                if (this.x < 0) this.x = width;\n                if (this.x > width) this.x = 0;\n                if (this.y < 0) this.y = height;\n                if (this.y > height) this.y = 0;\n            }\n\n            draw() {\n                // Draw trail\n                ctx.strokeStyle = `hsla(${this.hue}, 60%, 60%, 0.3)`;\n                ctx.lineWidth = 1;\n                ctx.beginPath();\n                this.trail.forEach((t, i) => {\n                    if (i === 0) {\n                        ctx.moveTo(t.x, t.y);\n                    } else {\n                        ctx.lineTo(t.x, t.y);\n                    }\n                });\n                ctx.stroke();\n\n                // Draw territory for sovereigns\n                if (this.sovereignty > 0.66 && this.territory.claimed) {\n                    ctx.strokeStyle = `hsla(${this.hue}, 50%, 50%, 0.15)`;\n                    ctx.lineWidth = 1;\n                    ctx.beginPath();\n                    ctx.arc(this.territory.x, this.territory.y, 80, 0, Math.PI * 2);\n                    ctx.stroke();\n                }\n\n                // Draw particle\n                const size = this.sovereignty > 0.66 ? 4 : 3;\n                ctx.fillStyle = `hsl(${this.hue}, 60%, 60%)`;\n                ctx.beginPath();\n                ctx.arc(this.x, this.y, size, 0, Math.PI * 2);\n                ctx.fill();\n\n                // Draw velocity indicator\n                ctx.strokeStyle = `hsla(${this.hue}, 60%, 60%, 0.5)`;\n                ctx.lineWidth = 1;\n                ctx.beginPath();\n                ctx.moveTo(this.x, this.y);\n                ctx.lineTo(this.x + this.vx * 3, this.y + this.vy * 3);\n                ctx.stroke();\n            }\n        }\n\n        const particles = [];\n        let spawnMode = null;\n\n        function spawnParticle(x, y, sovereignty) {\n            if (particles.length < 180) {\n                particles.push(new Particle(x, y, sovereignty));\n            }\n        }\n\n        canvas.addEventListener('click', (e) => {\n            const x = e.clientX;\n            const y = e.clientY;\n\n            let sovereignty;\n            if (spawnMode === 'tool') sovereignty = 0.1;\n            else if (spawnMode === 'entity') sovereignty = 0.5;\n            else if (spawnMode === 'sovereign') sovereignty = 0.9;\n            else sovereignty = Math.random();\n\n            spawnParticle(x, y, sovereignty);\n            spawnMode = null;\n        });\n\n        window.addEventListener('keydown', (e) => {\n            if (e.code === 'Space') {\n                particles.length = 0;\n            } else if (e.key === 't') {\n                spawnMode = 'tool';\n                spawnParticle(mouse.x, mouse.y, 0.1);\n            } else if (e.key === 'e') {\n                spawnMode = 'entity';\n                spawnParticle(mouse.x, mouse.y, 0.5);\n            } else if (e.key === 's') {\n                spawnMode = 'sovereign';\n                spawnParticle(mouse.x, mouse.y, 0.9);\n            }\n        });\n\n        // Initial spawn\n        for (let i = 0; i < 30; i++) {\n            const x = Math.random() * width;\n            const y = Math.random() * height;\n            const sovereignty = Math.random();\n            particles.push(new Particle(x, y, sovereignty));\n        }\n\n        let lastFrame = 0;\n        const frameInterval = 1000 / 30; // 30fps\n\n        function animate(timestamp) {\n            requestAnimationFrame(animate);\n\n            if (timestamp - lastFrame < frameInterval) return;\n            lastFrame = timestamp;\n\n            ctx.fillStyle = 'rgba(13, 17, 23, 0.15)';\n            ctx.fillRect(0, 0, width, height);\n\n            particles.forEach(p => p.update(particles));\n            particles.forEach(p => p.draw());\n\n            countEl.textContent = particles.length;\n        }\n\n        animate(0);\n    </script>\n</body>\n</html>"}